<xml>
	<pragma once="true" />
	<set name="LINK_TOOLID" value="exe" />

	<files id="haxe">
		<compilerflag value="-I${haxelib:tuna}/vendor/include/sdl2" />
		<compilerflag value="-I${haxelib:tuna}/vendor/src/sdl2" />
		<compilerflag value="-I${haxelib:tuna}" />

		<compilerflag value="-I${haxelib:tuna}/vendor/include" />
		<compilerflag value="-I${haxelib:tuna}" />
		<file name="${haxelib:tuna}/vendor/src/glad.c" />
	</files>

	<files id="__main__">
		<compilerflag value="-I${haxelib:tuna}/vendor/include/sdl2" />
		<compilerflag value="-I${haxelib:tuna}/vendor/src/sdl2" />
		<compilerflag value="-I${haxelib:tuna}" />
	</files>

	<section if="windows">
		<!-- copy dll to target directory -->
		<!-- TODO: figure out static linking properly -->
		<copyFile name="SDL2.dll" from="${haxelib:tuna}/vendor/lib/Windows/x64" toolid="exe"
			overwrite="true" />
	</section>

	<target id="haxe">
		<flag value="-fstack-protector" if="mingw" />

		<!-- mingw. . .-->
		<section if="mingw">
			<lib name="${haxelib:tuna}/vendor/lib/MinGW/libSDL2.a" />
		</section>

		<!--64
		bit only-->
		<section if="windows" unless="mingw">
			<lib name="${haxelib:tuna}/vendor/lib/Windows/x64/SDL2.lib" />
		</section>

		<section if="macos">
			<lib name="${haxelib:tuna}/vendor/lib/macOS/x64/libSDL2.a" />
		</section>

		<section if="linux || android">
			<lib name="-lSDL2" />
		</section>

		<section if="macos || ios">
			<vflag name="-framework" value="OpenGL" />
			<vflag name="-framework" value="Cocoa" />
		</section>
	</target>
</xml>